<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Style guide ¬∑ Trixi.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://trixi-framework.github.io/Trixi.jl/stable/styleguide/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Trixi.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../visualization/">Visualization</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorials/introduction/">Introduction</a></li><li><a class="tocitem" href="../tutorials/scalar_linear_advection_1d/">1 Introduction to DG methods</a></li><li><a class="tocitem" href="../tutorials/DGSEM_FluxDiff/">2 DGSEM with flux differencing</a></li><li><a class="tocitem" href="../tutorials/shock_capturing/">3 Shock capturing with flux differencing and stage limiter</a></li><li><a class="tocitem" href="../tutorials/non_periodic_boundaries/">4 Non-periodic boundaries</a></li><li><a class="tocitem" href="../tutorials/DGMulti_1/">5 DG schemes via <code>DGMulti</code> solver</a></li><li><a class="tocitem" href="../tutorials/DGMulti_2/">6 Other SBP schemes (FD, CGSEM) via <code>DGMulti</code> solver</a></li><li><a class="tocitem" href="../tutorials/upwind_fdsbp/">7 Upwind FD SBP schemes</a></li><li><a class="tocitem" href="../tutorials/adding_new_scalar_equations/">8 Adding a new scalar conservation law</a></li><li><a class="tocitem" href="../tutorials/adding_nonconservative_equation/">9 Adding a non-conservative equation</a></li><li><a class="tocitem" href="../tutorials/parabolic_terms/">10 Parabolic terms</a></li><li><a class="tocitem" href="../tutorials/adding_new_parabolic_terms/">11 Adding new parabolic terms</a></li><li><a class="tocitem" href="../tutorials/adaptive_mesh_refinement/">12 Adaptive mesh refinement</a></li><li><a class="tocitem" href="../tutorials/structured_mesh_mapping/">13 Structured mesh with curvilinear mapping</a></li><li><a class="tocitem" href="../tutorials/hohqmesh_tutorial/">14 Unstructured meshes with HOHQMesh.jl</a></li><li><a class="tocitem" href="../tutorials/time_stepping/">15 Explicit time stepping</a></li><li><a class="tocitem" href="../tutorials/differentiable_programming/">16 Differentiable programming</a></li></ul></li><li><span class="tocitem">Basic building blocks</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Meshes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../meshes/tree_mesh/">Tree mesh</a></li><li><a class="tocitem" href="../meshes/structured_mesh/">Structured mesh</a></li><li><a class="tocitem" href="../meshes/unstructured_quad_mesh/">Unstructured mesh</a></li><li><a class="tocitem" href="../meshes/p4est_mesh/">P4est-based mesh</a></li><li><a class="tocitem" href="../meshes/dgmulti_mesh/">DGMulti mesh</a></li></ul></li><li><a class="tocitem" href="../time_integration/">Time integration</a></li><li><a class="tocitem" href="../callbacks/">Callbacks</a></li></ul></li><li><span class="tocitem">Advanced topics &amp; developers</span><ul><li><a class="tocitem" href="../conventions/">Conventions</a></li><li><a class="tocitem" href="../development/">Development</a></li><li><a class="tocitem" href="../github-git/">GitHub &amp; Git</a></li><li class="is-active"><a class="tocitem" href>Style guide</a><ul class="internal"><li><a class="tocitem" href="#Conventions"><span>Conventions</span></a></li><li><a class="tocitem" href="#automated-source-code-formatting"><span>Automated source code formatting</span></a></li></ul></li><li><a class="tocitem" href="../testing/">Testing</a></li><li><a class="tocitem" href="../performance/">Performance</a></li><li><a class="tocitem" href="../parallelization/">Parallelization</a></li></ul></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting and FAQ</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../reference-trixi/">Trixi.jl</a></li><li><a class="tocitem" href="../reference-trixi2vtk/">Trixi2Vtk.jl</a></li></ul></li><li><a class="tocitem" href="../authors/">Authors</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li><li><a class="tocitem" href="../code_of_conduct/">Code of Conduct</a></li><li><a class="tocitem" href="../license/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced topics &amp; developers</a></li><li class="is-active"><a href>Style guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Style guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/trixi-framework/Trixi.jl/blob/main/docs/src/styleguide.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Style-guide"><a class="docs-heading-anchor" href="#Style-guide">Style guide</a><a id="Style-guide-1"></a><a class="docs-heading-anchor-permalink" href="#Style-guide" title="Permalink"></a></h1><p>Coding style is an inherently personal - and thus hotly contested - issue. Since code is usually &quot;written once, read often&quot;, it helps regular developers, new users, and reviewers if code is formatted consistently. We therefore believe in the merit of using a common coding style throughout Trixi.jl, even at the expense that not everyone can be happy with every detailed style decision. If you came here because you are furious about our code formatting rules, here is a happy little whale for you to calm you down: üê≥</p><h2 id="Conventions"><a class="docs-heading-anchor" href="#Conventions">Conventions</a><a id="Conventions-1"></a><a class="docs-heading-anchor-permalink" href="#Conventions" title="Permalink"></a></h2><p>The following lists a few coding conventions for Trixi.jl. Note that in addition to these conventions, we apply and enforce automated source code formatting (see <a href="#automated-source-code-formatting">below</a> for more details):</p><ul><li>Modules, types, structs with <code>CamelCase</code>.</li><li>Functions, variables with lowercase <code>snake_case</code>.</li><li>Indentation with 4 spaces (<em>never</em> tabs!)</li><li>Maximum line length (strictly): <strong>92</strong>.</li><li>Functions that mutate their <em>input</em> are named with a trailing <code>!</code>.</li><li>Functions order their parameters <a href="https://docs.julialang.org/en/v1/manual/style-guide/#Write-functions-with-argument-ordering-similar-to-Julia-Base-1">similar to Julia Base</a>.<ul><li>The main modified argument comes first. For example, if the right-hand side <code>du</code> is modified,  it should come first. If only the <code>cache</code> is modified, e.g., in <code>prolong2interfaces!</code>  and its siblings, put the <code>cache</code> first.</li><li>Otherwise, use the order <code>mesh, equations, solver, cache</code>.</li><li>If something needs to be specified in more detail for dispatch, put the additional argument before the general one  that is specified in more detail. For example, we use <code>have_nonconservative_terms(equations), equations</code> and <code>dg.mortar, dg</code>.</li></ul></li><li>Prefer <code>for i in ...</code> to <code>for i = ...</code> for better semantic clarity and greater flexibility.</li><li>Executable code should only use ASCII characters.</li><li>Docstrings and comments can and should use Unicode characters where it helps understanding.</li><li>Multiline expressions should be explicitly grouped by parentheses and not rely on Julia&#39;s implicit line continuation syntax.</li><li>When naming multiple functions of a single or similar category, prefer to put the <em>general classification</em> first and the <em>specialization</em> second. Example: Use <code>flux_central</code> instead of <code>central_flux</code>. This helps when searching for available functions on the REPL (e.g., when trying to find all flux functions).</li></ul><h2 id="automated-source-code-formatting"><a class="docs-heading-anchor" href="#automated-source-code-formatting">Automated source code formatting</a><a id="automated-source-code-formatting-1"></a><a class="docs-heading-anchor-permalink" href="#automated-source-code-formatting" title="Permalink"></a></h2><p>We use <a href="https://github.com/domluna/JuliaFormatter.jl">JuliaFormatter.jl</a> to format the source code of Trixi.jl, which will also enforce <em>some</em> of the <a href="#Conventions">Conventions</a> listed above (e.g., line length or indentation with 4 spaces are automatically handled, while capitalization of names is not). Our format is mostly based on the <a href="https://domluna.github.io/JuliaFormatter.jl/stable/sciml_style/">SciML</a>-style formatting rules. For more details you can have a look at the current <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/.JuliaFormatter.toml"><code>.JuliaFormatter.toml</code></a> file that holds the configuration options we use for JuliaFormatter.jl.</p><p>Note that we expect all contributions to Trixi.jl to be formatted with JuliaFormatter.jl before being merged to the <code>main</code> branch. We ensure this by running a automated check on all PRs that verify that running JuliaFormatter.jl again will not change the source code.</p><p>To format your contributions before created a PR (or, at least, before requesting a review of your PR), you need to install JuliaFormatter.jl first by running</p><pre><code class="language-shell hljs">julia -e &#39;using Pkg; Pkg.add(&quot;JuliaFormatter&quot;)&#39;</code></pre><p>You can then recursively format the core Julia files in the Trixi.jl repo by executing</p><pre><code class="language-shell hljs">julia -e &#39;using JuliaFormatter; format([&quot;benchmark&quot;, &quot;ext&quot;, &quot;src&quot;, &quot;utils&quot;])&#39;</code></pre><p>from inside the Trixi.jl repository. For convenience, there is also a script you can directly run from your terminal shell, which will automatically install JuliaFormatter in a temporary environment and then run it:</p><pre><code class="language-shell hljs">utils/trixi-format.jl</code></pre><p>You can get more information about using the convenience script by running it with the <code>--help</code>/<code>-h</code> flag.</p><h3 id="Checking-formatting-before-committing"><a class="docs-heading-anchor" href="#Checking-formatting-before-committing">Checking formatting before committing</a><a id="Checking-formatting-before-committing-1"></a><a class="docs-heading-anchor-permalink" href="#Checking-formatting-before-committing" title="Permalink"></a></h3><p>It can be convenient to check the formatting of source code automatically before each commit.  We use git-hooks for it and provide a <code>pre-commit</code> script in the <code>utils</code> folder. The script uses <a href="https://github.com/domluna/JuliaFormatter.jl">JuliaFormatter.jl</a> just like formatting script that  runs over the whole Trixi.jl directory.  You can copy the <code>pre-commit</code>-script into <code>.git/hooks/pre-commit</code> and it will check your formatting  before each commit. If errors are found the commit is aborted and you can add the corrections via</p><pre><code class="language-shell hljs">git add -p</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../github-git/">¬´ GitHub &amp; Git</a><a class="docs-footer-nextpage" href="../testing/">Testing ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 23 June 2023 06:51">Friday 23 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
